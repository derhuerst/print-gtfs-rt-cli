# print-gtfs-rt-cli

**Read a [GTFS Realtime (GTFS-RT)](https://developers.google.com/transit/gtfs-realtime/) feed from stdin, print human-readable or as JSON.**

[![npm version](https://img.shields.io/npm/v/print-gtfs-rt-cli.svg)](https://www.npmjs.com/package/print-gtfs-rt-cli)
![ISC-licensed](https://img.shields.io/github/license/derhuerst/print-gtfs-rt-cli.svg)
[![support me via GitHub Sponsors](https://img.shields.io/badge/support%20me-donate-fa7664.svg)](https://github.com/sponsors/derhuerst)
[![chat with me on Twitter](https://img.shields.io/badge/chat%20with%20me-on%20Twitter-1da1f2.svg)](https://twitter.com/derhuerst)


## Installing

```shell
npm install -g print-gtfs-rt-cli
```

Or use [`npx`](https://npmjs.com/package/npx). âœ¨


## Getting Started

With the [example feed `example-feed.pbf`](example-feed.pbf), the first `FeedEntity` can be obtained as JSON and pretty-printed using [`jq`](https://jqlang.github.io/jq/) like this:

```shell
print-gtfs-rt <example-feed.pbf | head -n 1 | jq -r --tab
```

```json
{
    "id": "8.TA.40-11-Y-j18-1.7.H",
    "trip_update": {
        "trip": {
            "trip_id": "8.TA.40-11-Y-j18-1.7.H",
            "start_time": "12:00:00",
            "start_date": "20180907",
            "schedule_relationship": 0,
            "route_id": "40-11-Y-j18-1"
        },
        "stop_time_update": [
            {
                "stop_sequence": 1,
                "departure": {
                    "delay": 120
                },
                "stop_id": "8507492:0:7",
                "schedule_relationship": 0
            },
            {
                "stop_sequence": 4,
                "arrival": {
                    "delay": 0
                },
                "departure": {
                    "delay": 60
                },
                "stop_id": "8507100:0:2",
                "schedule_relationship": 0
            },
            {
                "stop_sequence": 5,
                "arrival": {
                    "delay": 0
                },
                "departure": {
                    "delay": 0
                },
                "stop_id": "8507000:0:6",
                "schedule_relationship": 0
            },
            {
                "stop_sequence": 7,
                "arrival": {
                    "delay": 60
                },
                "departure": {
                    "delay": 120
                },
                "stop_id": "8500218:0:7",
                "schedule_relationship": 0
            },
            {
                "stop_sequence": 8,
                "arrival": {
                    "delay": 60
                },
                "departure": {
                    "delay": 60
                },
                "stop_id": "8500023:0:3",
                "schedule_relationship": 0
            },
            {
                "stop_sequence": 9,
                "arrival": {
                    "delay": -60
                },
                "departure": {
                    "delay": 0
                },
                "stop_id": "8500010:0:10",
                "schedule_relationship": 0
            }
        ]
    }
}
```


## Usage

```
Usage:
    cat gtfs-rt-feed.pbf | print-gtfs-rt
Options:
    --length-prefixed  -l  Read input as length-prefixed.
                           See https://www.npmjs.com/package/length-prefixed-stream
    --json             -j  Output newline-delimeted JSON (http://ndjson.org).
    --single-json -s       Output a single JSON array.
    --depth            -d  Number of nested levels to print. Default: infinite
    --include-all      -a  Print the entire FeedMessage, including its header.
    --gtfs-rt-bindings     Path to GTFS-RT bindings. Must be compatible with
                           those generated by protobufjs.
Examples:
    curl 'https://example.org/gtfs-rt.pbf' | print-gtfs-rt
```


## Contributing

If you have a question or have difficulties using `print-gtfs-rt-cli`, please double-check your code and setup first. If you think you have found a bug or want to propose a feature, refer to [the issues page](https://github.com/derhuerst/print-gtfs-rt-cli/issues).


## Example feed

The example feed is taken from [the Swiss open GTFS-RT feed](https://opentransportdata.swiss/en/dataset/gtfsrt), licensed under [their open data license](https://opentransportdata.swiss/en/terms-of-use/).
